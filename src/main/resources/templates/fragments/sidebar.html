<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
</head>
<body>

<!-- Sidebar Fragment -->
<nav class="sidebar" th:fragment="sidebar(activePage, user)">
    <div class="p-4">
        <h4 class="text-white mb-4"><i class="fas fa-users me-2"></i>LazyHR</h4>
        <ul class="nav flex-column">
            <li class="nav-item mb-2">
                <a class="nav-link" th:href="@{/dashboard}" 
                   th:classappend="${activePage == 'dashboard'} ? 'active' : ''">
                    <i class="fas fa-tachometer-alt me-2"></i>Dashboard
                </a>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link" th:href="@{/attendance}"
                   th:classappend="${activePage == 'attendance'} ? 'active' : ''">
                    <i class="fas fa-clock me-2"></i>Attendance
                </a>
            </li>
            <li class="nav-item mb-2">
                <a class="nav-link" th:href="@{/leave}"
                   th:classappend="${activePage == 'leave'} ? 'active' : ''">
                    <i class="fas fa-calendar-alt me-2"></i>Leave Management
                </a>
            </li>
            <li class="nav-item mb-2"
                th:if="${user != null and (user.role.name() == 'ADMIN' or user.role.name() == 'MANAGER')}">
                <a class="nav-link" th:href="@{/users}"
                   th:classappend="${activePage == 'users'} ? 'active' : ''">
                    <i class="fas fa-users me-2"></i>User Management
                </a>
            </li>
            <li class="nav-item mb-2"
                th:if="${user != null and (user.role.name() == 'ADMIN' or user.role.name() == 'MANAGER')}">
                <a class="nav-link" th:href="@{/reports}"
                   th:classappend="${activePage == 'reports'} ? 'active' : ''">
                    <i class="fas fa-chart-bar me-2"></i>Reports
                </a>
            </li>
        </ul>
    </div>
    <div class="mt-auto p-4">
        <div class="d-flex align-items-center text-white mb-3">
            <i class="fas fa-user-circle fa-2x me-3"></i>
            <div>
                <div class="fw-bold" 
                     th:text="${user != null ? (user.firstName + ' ' + user.lastName) : 'Guest User'}">
                    Guest User
                </div>
                <small class="text-white-50" 
                       th:text="${user != null ? user.role.name() : 'GUEST'}">
                    GUEST
                </small>
            </div>
        </div>
        <a href="/lazyhr/logout" class="btn btn-outline-light btn-sm w-100">
            <i class="fas fa-sign-out-alt me-1"></i>Logout
        </a>
    </div>
</nav>

</body>
</html>
